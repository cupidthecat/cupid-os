>comment CupidMark converted document
>h1 GUI Terminal and Embedded Shell
Verified against source on: 2026-02-13
>style bg #F7F4EC
>style body #1A1A1A
>style h1 #B03060
>style h2 #2B4FA8
>style h3 #9A5A00
>style rule #B8B1A3
>style box #EEE7D8
>style boxtext #223355
>style link #1D4ED8
>style linkhover #0B3AA8
>rule

>h2 What "Embedded Shell" Means Here
CupidOS has one shell core that can output in:
- Text mode (classic VGA)
- GUI buffer mode (Terminal app window)

The Terminal window renders shell text buffer cells and ANSI colors.

>h2 How To Open Terminal
From shell:
  terminal

From desktop:
- Use terminal app icon/launcher.

Only one terminal window instance is kept at a time by terminal app logic.

>h2 Key Controls In GUI Terminal
Typing:
- Normal keys go to shell line editor.

Scrolling:
- Mouse wheel scrolls terminal history.
- Page Up / Page Down scroll by chunks.

Zoom:
- Ctrl + '+' to increase font scale (up to 3x)
- Ctrl + '-' to decrease font scale

Cursor:
- Blinks on focused terminal window.

>h2 How Program Input Routing Works
When a JIT program (CupidC or CupidASM) starts:
- Shell marks program as running.
- Keyboard input is routed to program input buffer.

When program exits:
- Input routing returns to shell prompt.

This allows interactive programs to receive keystrokes in GUI mode.

>h2 Desktop App Integration
Shell can launch GUI apps:
  notepad
  terminal

Some CupidC programs are GUI apps (paint, fm, gfx demos) and can be launched
from shell if they are available in /bin or /home/bin.

>h2 Desktop Window Controls
Window manager controls:
- Drag a window by its title bar to move it.
- Drag from the bottom-right corner grip to resize.
- Click [X] to close.

Notes:
- Resize is clamped so windows stay on-screen with minimum dimensions.
- Bottom-edge interactions now prioritize window hit-testing so resize works
  reliably even when the pointer is near the taskbar area.

>h2 Desktop Global Shortcuts
While on desktop:
- Ctrl + Alt + T  -> open Terminal
- Ctrl + Alt + N  -> open Notepad
- Ctrl + Alt + E  -> toggle Neon desktop FX
- Ctrl + Alt + C  -> toggle CRT overlay FX
- F5              -> rescan /bin icon directives

>h2 Text Mode Vs GUI Mode Differences
Text mode:
- Kernel print/putchar go directly to VGA text memory.

GUI mode:
- Output is redirected into shell GUI buffer.
- FAT16/memory/panic/blockcache output routes are switched to GUI-aware
  output callbacks while shell is in GUI output mode.

>h2 Practical Tips
1) If a graphics app says it requires GUI mode, run it from desktop terminal.
2) If terminal output looks clipped, adjust zoom (Ctrl +/-).
3) If debugging command-line behavior, text-mode shell can be simpler.

>h2 See Also
01SHELL.TXT for shell editing and dispatch behavior
04CUPIDC.TXT for GUI-capable CupidC bindings

